extends layout
include mixins.pug

block append head
    link(href='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css', rel='stylesheet')
    script(src='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js')
    script(src='/js/ui-controller.js', defer)
    script(src='/js/mapbox-controller.js', defer)

block content
    #map-container
    #sidebar-container
        h1.title
            a #{title}
        form#search-container(
            action='/api/search'
            method='post'
            autocomplete='off'
            autocorrect='off'
            spellcheck='false'
        )
            input(
                type='text'
                name='search'
                placeholder='Search by station...'
                aria-autocomplete='list'
            )
            button.search-submit(
                aria-label='Submit search'
            )
                +icon('search')
            ul#search-results-container(
                aria-label='Search results'
            )
        
        +card('stop-details', '', 'Rail station')
            ul.stop-tags-container
                li.stop-accessibility-state
            p.stop-accessibility-info
            a.stop-alert-link.link-external.hidden(target='_blank')= 'View service alert details'
                +icon('link')
            span.source-link='Source: '
                a(target='_blank')
        
        +card('about', 'About')
            p
                |Decades after the passage of the Americans with Disabilities Act, public
                |transportation still remains largely inaccessible to a population that
                |relies on it most. These barriers push disabled people to their physical
                |and financial limits, yet agencies #[a(href='https://www.nytimes.com/2022/06/22/nyregion/nyc-subway-accessibility-disabilities-elevators.html' target='_blank')= 'such as the New York MTA']
                |still have gone largely unchecked in their discriminatory practices.
            p
                |This app is was designed by Ivy, a wheelchair user, for other wheelchair
                |users and their allies. This project is free and
                |#[a(href='https://github.com/ivyrze/transit-a11y' target='_blank')= 'open-source'],
                |so donation contributions are always appreciated.
        
        +card('error')
            +icon('error')
            h2= 'Something went wrong'
            p
                | Things aren't working as expected on our end, sorry about that. Try again in a few minutes.
    
    script.
        var options = !{JSON.stringify(options)};